apiVersion: tekton.dev/v1
kind: Task
metadata:
  namespace: cost-mgmt-dev-tenant
  name: debug

spec:
  params:
    - name: BONFIRE_IMAGE
      type: string

    - name: SNAPSHOT
      type: string

    - name: REF_ENV
      type: string

    - name: PIPELINE_RUN_NAME
      type: string

    - name: PIPELINE_RUN_UID
      type: string

  steps:
    - name: show-some-things
      image: $(params.BONFIRE_IMAGE)
      onError: continue
      env:
        - name: PR_NUMBER
          valueFrom:
            fieldRef:
              fieldPath: metadata.labels['pac.test.appstudio.openshift.io/pull-request']

        - name: SNAPSHOT
          value: $(params.SNAPSHOT)

        - name: REF_ENV
          value: $(params.REF_ENV)

      script: |
        #!/usr/bin/bash

        env | sort
        echo Name $(params.PIPELINE_RUN_NAME)
        echo UID $(params.PIPELINE_RUN_UID)
